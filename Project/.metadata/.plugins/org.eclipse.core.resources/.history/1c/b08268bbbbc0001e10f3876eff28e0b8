package ch05_pjt_01.contact;

import org.springframework.context.support.GenericXmlApplicationContext;

import ch05_pjt_01.contact.utils.InitSampleData;
import ch05_pjt_01_contact.service.ContactRegisterService;
import ch05_pjt_01_contact.service.ContactSearchService;

public class MainClass {
	
	public static void main(String[] args) {
		
		GenericXmlApplicationContext ctx =
				new GenericXmlApplicationContext("classpath:appCtx.xml");
		
		InitSampleData initSampleData =
				ctx.getBean("initSampleData", InitSampleData.class);
		String[] names = initSampleData.getNames();
		String[] phoneNumbers = initSampleData.getPhoneNumbers();
		
		ContactRegisterService registerService =
				ctx.getBean("registerService", ContactRegisterService.class);
		
		
//			ContactSetDTO contactSetDTO = new ContactSetDTO(names[i], phoneNumbers[i]);
//			registerService.register(contactSetDTO);
		for(int i=0; i<names.length; i++) {
			registerService.register(new ContactSetDTO(names[i], phoneNumbers[i]));
		}
//			for(int i = 0; i < userId.length; i++) {
//				registerService.register(new MembershipDTO(userId[i], userPw[i], userTel[i],
//						userEmail[i], newSineup[i],lastMf[i]));
		
		ContactSearchService searchService =
				ctx.getBean("searchService", ContactSearchService.class);
		ContactSetDTO contactSetDTO = searchService.searchContact("류현진");
		System.out.println("name : " + contactSetDTO.getName());
		System.out.println("phone number : " + contactSetDTO.getPhoneNumber());
		System.out.println("--------------------------------------------------");
		
		contactSetDTO = searchService.searchContact("손흥민");
		System.out.println("name : " + contactSetDTO.getName());
		System.out.println("phone number : " + contactSetDTO.getPhoneNumber());
		System.out.println("--------------------------------------------------");
		
		contactSetDTO = searchService.searchContact("김연경");
		System.out.println("name : " + contactSetDTO.getName());
		System.out.println("phone number : " + contactSetDTO.getPhoneNumber());
		System.out.println("--------------------------------------------------");
	}
}